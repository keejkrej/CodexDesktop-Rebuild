"use strict";const n=require("electron"),p="codex_desktop:show-context-menu",g="codex_desktop:get-sentry-init-options",u="codex_desktop:get-build-flavor",S="codex_desktop:trigger-sentry-test";function w(e){return`codex_desktop:worker:${e}:from-view`}function _(e){return`codex_desktop:worker:${e}:for-view`}const l="electron",M="codex_desktop:message-from-view",f="codex_desktop:message-for-view",v=n.ipcRenderer.sendSync(g),R=n.ipcRenderer.sendSync(u),r=new Map,d=new Map,T={windowType:l,sendMessageFromView:async e=>{await n.ipcRenderer.invoke(M,e)},getPathForFile:e=>{const t=n.webUtils.getPathForFile(e);return t||null},sendWorkerMessageFromView:async(e,t)=>{await n.ipcRenderer.invoke(w(e),t)},subscribeToWorkerMessages:(e,t)=>{let o=r.get(e);o||(o=new Set,r.set(e,o));let s=d.get(e);return s||(s=(i,c)=>{const a=r.get(e);a&&a.forEach(E=>{E(c)})},d.set(e,s),n.ipcRenderer.on(_(e),s)),o.add(t),()=>{const i=r.get(e);if(!i||(i.delete(t),i.size>0))return;r.delete(e);const c=d.get(e);c&&n.ipcRenderer.removeListener(_(e),c),d.delete(e)}},showContextMenu:async e=>n.ipcRenderer.invoke(p,e),triggerSentryTestError:async()=>{await n.ipcRenderer.invoke(S)},getSentryInitOptions:()=>v,getBuildFlavor:()=>R};n.ipcRenderer.on(f,(e,t)=>{window.dispatchEvent(new MessageEvent("message",{data:t}))});n.contextBridge.exposeInMainWorld("codexWindowType",l);n.contextBridge.exposeInMainWorld("electronBridge",T);
//# sourceMappingURL=preload.js.map
