import{c as te,t as ae,v as ne,I as ie,L as oe,N as le,w as re,f as ce,g as de,j as s,e as S,l as ge,m as pe,O as me,P as fe,R as ue,B as Y,M as o,U as xe,n as he,V as ye,X as be,h as je,S as ve}from"./index-DYrX9Gof.js";function Se(){const e=te.c(70),t=ae(),r=ne(),U=ie();let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C="1444479692",e[0]=C):C=e[0];const V=oe(C),{personality:c,setPersonality:G}=le(),[A,Z]=re.useState(null);let z;e[1]===Symbol.for("react.memo_cache_sentinel")?(z={queryConfig:void 0},e[1]=z):z=e[1];const{data:H,error:ee,isFetching:se,refetch:O}=ce("codex-agents-md",z);let d;e[2]!==t||e[3]!==U||e[4]!==r?(d=(n,T)=>{U.setQueryData(be("codex-agents-md"),{path:n.path,contents:T.contents}),Z(null),r.success(t.formatMessage({id:"settings.personalization.agents.save.success",defaultMessage:"Saved agents.md",description:"Toast shown when agents.md is saved"}))},e[2]=t,e[3]=U,e[4]=r,e[5]=d):d=e[5];let g;e[6]!==t||e[7]!==r?(g=()=>{r.danger(t.formatMessage({id:"settings.personalization.agents.save.error",defaultMessage:"Unable to save agents.md",description:"Toast shown when agents.md save fails"}))},e[6]=t,e[7]=r,e[8]=g):g=e[8];let N;e[9]!==d||e[10]!==g?(N={onSuccess:d,onError:g},e[9]=d,e[10]=g,e[11]=N):N=e[11];const k=de("codex-agents-md-save",N),M=H?.contents??"",p=A??M,m=A!=null&&A!==M,a=H!=null,Q=!a&&se,i=k.isPending,q=ee!=null&&H==null;let w;e[12]!==p||e[13]!==m||e[14]!==a||e[15]!==i||e[16]!==k?(w=()=>{!a||!m||i||k.mutate({contents:p})},e[12]=p,e[13]=m,e[14]=a,e[15]=i,e[16]=k,e[17]=w):w=e[17];const X=w;let E;e[18]!==O?(E=()=>{O()},e[18]=O,e[19]=E):E=e[19];const K=E;let L;e[20]!==t?(L=t.formatMessage({id:"settings.personalization.agents.placeholder",defaultMessage:"Add your custom instructions…",description:"Placeholder text for personal agents editor"}),e[20]=t,e[21]=L):L=e[21];const W=L;let D;e[22]!==t?(D=t.formatMessage({id:"settings.personalization.agents.title",defaultMessage:"Custom instructions",description:"Heading for personal agents settings section"}),e[22]=t,e[23]=D):D=e[23];const $=D;let f;e[24]!==t?(f=t.formatMessage({id:"composer.personalitySlashCommand.label.friendly",defaultMessage:"Friendly",description:"Label for the friendly personality"}),e[24]=t,e[25]=f):f=e[25];let u;e[26]!==t?(u=t.formatMessage({id:"composer.personalitySlashCommand.description.friendly",defaultMessage:"Warm, collaborative, and helpful",description:"Description for the friendly personality option"}),e[26]=t,e[27]=u):u=e[27];let x;e[28]!==u||e[29]!==f?(x={value:"friendly",label:f,description:u},e[28]=u,e[29]=f,e[30]=x):x=e[30];let h;e[31]!==t?(h=t.formatMessage({id:"composer.personalitySlashCommand.label.pragmatic",defaultMessage:"Pragmatic",description:"Label for the pragmatic personality"}),e[31]=t,e[32]=h):h=e[32];let y;e[33]!==t?(y=t.formatMessage({id:"composer.personalitySlashCommand.description.pragmatic",defaultMessage:"Concise, task-focused, and direct",description:"Description for the pragmatic personality option"}),e[33]=t,e[34]=y):y=e[34];let b;e[35]!==h||e[36]!==y?(b={value:"pragmatic",label:h,description:y},e[35]=h,e[36]=y,e[37]=b):b=e[37];let _;e[38]!==x||e[39]!==b?(_=[x,b],e[38]=x,e[39]=b,e[40]=_):_=e[40];const l=_;let P;e[41]!==c||e[42]!==l?(P=l.find(n=>n.value===c)??l[0],e[41]=c,e[42]=l,e[43]=P):P=e[43];const J=P;let R;e[44]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(je,{slug:"personalization"}),e[44]=R):R=e[44];let j;e[45]!==V||e[46]!==a||e[47]!==i||e[48]!==c||e[49]!==l||e[50]!==J||e[51]!==G?(j=V?s.jsx(S,{className:"gap-2",children:s.jsx(S.Content,{children:s.jsx(ge,{children:s.jsx(pe,{label:s.jsx(o,{id:"settings.personalization.personality.label",defaultMessage:"Personality",description:"Label for personality selection in personalization settings"}),description:s.jsx(o,{id:"settings.personalization.personality.description",defaultMessage:"Choose a default tone for Codex responses",description:"Description for personality selection in personalization settings"}),control:s.jsx(me,{triggerButton:s.jsx(Y,{color:"secondary",size:"toolbar",className:"min-w-[240px] justify-between",disabled:!a||i,children:s.jsx("span",{className:"flex items-center gap-1.5",children:J.label})}),align:"end",children:s.jsx("div",{className:"w-[260px] max-w-xs space-y-1",children:l.map(n=>s.jsx(fe.Item,{onSelect:()=>{G(n.value)},RightIcon:c===n.value?ue:void 0,children:s.jsxs("div",{className:"flex flex-col items-start gap-0.5",children:[s.jsx("span",{className:"text-sm",children:n.label}),s.jsx("span",{className:"text-token-text-secondary text-xs",children:n.description})]})},n.value))})})})})})}):null,e[45]=V,e[46]=a,e[47]=i,e[48]=c,e[49]=l,e[50]=J,e[51]=G,e[52]=j):j=e[52];let F;e[53]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(o,{id:"settings.personalization.agents.title",defaultMessage:"Custom instructions",description:"Heading for personal agents settings section"}),e[53]=F):F=e[53];let I;e[54]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(S.Header,{title:F,subtitle:s.jsx(o,{id:"settings.personalization.agents.description",defaultMessage:"Edit instructions that tailor Codex to you. {learnMore}",description:"Description for personal agents settings",values:{learnMore:s.jsxs("a",{className:"text-token-text-secondary hover:text-token-text-primary inline-flex items-center gap-1",href:xe,target:"_blank",rel:"noreferrer",children:[s.jsx(o,{id:"settings.personalization.agents.learnMore",defaultMessage:"Learn more",description:"Link label for agents.md docs"}),s.jsx(he,{className:"icon-xxs"})]})}})}),e[54]=I):I=e[54];let v;e[55]!==M||e[56]!==$||e[57]!==p||e[58]!==K||e[59]!==X||e[60]!==m||e[61]!==Q||e[62]!==a||e[63]!==i||e[64]!==W||e[65]!==q?(v=s.jsxs(S,{className:"gap-2",children:[I,s.jsx(S.Content,{children:q?s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(o,{id:"settings.personalization.agents.loadError",defaultMessage:"Unable to load agents.md.",description:"Error message shown when agents.md fails to load"})}),s.jsx(Y,{className:"shrink-0",color:"secondary",onClick:K,size:"toolbar",children:s.jsx(o,{id:"settings.personalization.agents.retry",defaultMessage:"Retry",description:"Button label to retry loading agents.md"})})]}):s.jsxs("div",{className:"flex flex-col gap-3",children:[Q?s.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2 text-sm",children:[s.jsx(ye,{className:"icon-xs"}),s.jsx(o,{id:"settings.personalization.agents.loading",defaultMessage:"Loading agents.md…",description:"Loading label for agents.md editor"})]}):s.jsx("textarea",{"aria-label":$,id:"personal-agents-editor",className:"bg-token-input-background text-token-text-primary font-mono w-full rounded-md border border-token-border px-2.5 py-2 text-sm outline-none focus-visible:ring-2 focus-visible:ring-token-focus",disabled:!a||i,placeholder:W,rows:12,value:p,onChange:n=>{const T=n.target.value;Z(T===M?null:T)}}),s.jsx("div",{className:"flex items-center justify-end gap-2",children:s.jsx(Y,{color:"primary",disabled:!m||!a,loading:i,onClick:X,size:"toolbar",children:s.jsx(o,{id:"settings.personalization.agents.save",defaultMessage:"Save",description:"Save button label for personal agents editor"})})})]})})]}),e[55]=M,e[56]=$,e[57]=p,e[58]=K,e[59]=X,e[60]=m,e[61]=Q,e[62]=a,e[63]=i,e[64]=W,e[65]=q,e[66]=v):v=e[66];let B;return e[67]!==j||e[68]!==v?(B=s.jsxs(ve,{title:R,children:[j,v]}),e[67]=j,e[68]=v,e[69]=B):B=e[69],B}export{Se as PersonalizationSettings};
//# sourceMappingURL=personalization-settings-DbiwQ-Zh.js.map
