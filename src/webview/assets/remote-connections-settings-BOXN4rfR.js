import{c as X,t as te,v as ne,x as oe,w as se,y as ie,j as s,e as Z,B as K,M as h,l as le,G as ae,h as re,S as de,a5 as ce,a6 as me,a7 as Q,a8 as fe,a9 as ge}from"./index-DYrX9Gof.js";const U="—";function Ce(){const t=X.c(55),e=te(),c=ne(),{data:r,setData:a,isLoading:d}=oe(ae.REMOTE_CONNECTIONS),[i,m]=se.useState(null);let o;t[0]!==r?(o=r??[],t[0]=r,t[1]=o):o=t[1];const n=o;let p;t[2]!==a?(p=async f=>a(f),t[2]=a,t[3]=p):p=t[3];let S,u;t[4]!==e||t[5]!==c?(S=()=>{c.success(e.formatMessage({id:"settings.remoteConnections.save.success",defaultMessage:"Saved remote connections",description:"Toast shown when remote connections are saved"}))},u=()=>{c.danger(e.formatMessage({id:"settings.remoteConnections.save.error",defaultMessage:"Failed to save remote connections",description:"Toast shown when remote connections fail to save"}))},t[4]=e,t[5]=c,t[6]=S,t[7]=u):(S=t[6],u=t[7]);let g;t[8]!==p||t[9]!==S||t[10]!==u?(g={mutationFn:p,onSuccess:S,onError:u},t[8]=p,t[9]=S,t[10]=u,t[11]=g):g=t[11];const l=ie(g);let _;t[12]===Symbol.for("react.memo_cache_sentinel")?(_=f=>{m(x=>x&&{...x,draft:f(x.draft)})},t[12]=_):_=t[12];const I=_;let E;t[13]!==n||t[14]!==i||t[15]!==l?(E=()=>{if(!i||l.isPending)return;const f=be(i.draft),x=i.mode==="add"?[...n,f]:n.map((z,q)=>q===i.index?f:z);l.mutate(x,{onSuccess:()=>{m(null)}})},t[13]=n,t[14]=i,t[15]=l,t[16]=E):E=t[16];const P=E;let k;t[17]!==n||t[18]!==l?(k=f=>{l.isPending||l.mutate(n.filter((x,z)=>z!==f))},t[17]=n,t[18]=l,t[19]=k):k=t[19];const A=k;let D;t[20]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(re,{slug:"remote-connections"}),t[20]=D):D=t[20];let R;t[21]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(h,{id:"settings.remoteConnections.header.title",defaultMessage:"SSH connections",description:"Header title for the list of remote SSH connections"}),t[21]=R):R=t[21];let T;t[22]===Symbol.for("react.memo_cache_sentinel")?(T=()=>m({mode:"add",draft:ee()}),t[22]=T):T=t[22];let w;t[23]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(h,{id:"settings.remoteConnections.add",defaultMessage:"Add connection",description:"Button label to add a remote connection"}),t[23]=w):w=t[23];let b;t[24]!==l.isPending?(b=s.jsx(Z.Header,{title:R,actions:s.jsx(K,{color:"secondary",size:"toolbar",onClick:T,disabled:l.isPending,children:w})}),t[24]=l.isPending,t[25]=b):b=t[25];let y;t[26]!==n.length||t[27]!==d?(y=d&&n.length===0?s.jsx("div",{className:"p-3 text-sm text-token-text-secondary",children:s.jsx(h,{id:"settings.remoteConnections.loading",defaultMessage:"Loading remote connections…",description:"Loading message for remote connections settings"})}):null,t[26]=n.length,t[27]=d,t[28]=y):y=t[28];let j;t[29]!==n.length||t[30]!==d?(j=!d&&n.length===0?s.jsx("div",{className:"p-3 text-sm text-token-text-secondary",children:s.jsx(h,{id:"settings.remoteConnections.empty",defaultMessage:"No saved SSH connections yet. Add one to get started.",description:"Empty state for remote ssh connections settings"})}):null,t[29]=n.length,t[30]=d,t[31]=j):j=t[31];let C;t[32]!==n||t[33]!==A||t[34]!==l.isPending?(C=n.length>0?s.jsx(ue,{connections:n,disabled:l.isPending,onEdit:f=>{const x=n[f];x&&m({mode:"edit",index:f,draft:xe(x)})},onRemove:A}):null,t[32]=n,t[33]=A,t[34]=l.isPending,t[35]=C):C=t[35];let N;t[36]!==y||t[37]!==j||t[38]!==C?(N=s.jsx(Z.Content,{children:s.jsxs(le,{children:[y,j,C]})}),t[36]=y,t[37]=j,t[38]=C,t[39]=N):N=t[39];let M;t[40]!==b||t[41]!==N?(M=s.jsx(de,{title:D,children:s.jsxs(Z,{children:[b,N]})}),t[40]=b,t[41]=N,t[42]=M):M=t[42];const B=i!=null,O=i?.mode??"add";let v;t[43]!==i?.draft?(v=i?.draft??ee(),t[43]=i?.draft,t[44]=v):v=t[44];let F;t[45]===Symbol.for("react.memo_cache_sentinel")?(F=f=>{f||m(null)},t[45]=F):F=t[45];let H;t[46]!==P||t[47]!==l.isPending||t[48]!==B||t[49]!==O||t[50]!==v?(H=s.jsx(he,{open:B,mode:O,draft:v,onOpenChange:F,onChange:I,onSubmit:P,isSaving:l.isPending}),t[46]=P,t[47]=l.isPending,t[48]=B,t[49]=O,t[50]=v,t[51]=H):H=t[51];let G;return t[52]!==M||t[53]!==H?(G=s.jsxs(s.Fragment,{children:[M,H]}),t[52]=M,t[53]=H,t[54]=G):G=t[54],G}function ue(t){const e=X.c(15),{connections:c,disabled:r,onEdit:a,onRemove:d}=t;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("th",{className:"px-3 py-2 text-left font-medium",children:s.jsx(h,{id:"settings.remoteConnections.table.name",defaultMessage:"Name",description:"Column header for remote connections display name"})}),e[0]=i):i=e[0];let m;e[1]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("th",{className:"px-3 py-2 text-left font-medium",children:s.jsx(h,{id:"settings.remoteConnections.table.sshHost",defaultMessage:"SSH host",description:"Column header for remote connections SSH host"})}),e[1]=m):m=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx("th",{className:"px-3 py-2 text-left font-medium",children:s.jsx(h,{id:"settings.remoteConnections.table.port",defaultMessage:"Port",description:"Column header for remote connections SSH port"})}),e[2]=o):o=e[2];let n;e[3]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx("thead",{className:"bg-token-foreground/5",children:s.jsxs("tr",{children:[i,m,o,s.jsx("th",{className:"px-3 py-2 text-left font-medium",children:s.jsx(h,{id:"settings.remoteConnections.table.identity",defaultMessage:"Identity",description:"Column header for remote connections identity file"})})]})}),e[3]=n):n=e[3];let p;if(e[4]!==c||e[5]!==r||e[6]!==a||e[7]!==d){let u;e[9]!==r||e[10]!==a||e[11]!==d?(u=(g,l)=>s.jsxs("tr",{className:"border-token-border-default border-t align-middle",children:[s.jsx("td",{className:"px-3 py-2",children:g.displayName.trim()||U}),s.jsx("td",{className:"px-3 py-2",children:g.sshHost.trim()||U}),s.jsx("td",{className:"px-3 py-2",children:g.sshPort==null?U:String(g.sshPort)}),s.jsx("td",{className:"px-3 py-2",children:g.identity?.trim()||U}),s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(K,{color:"ghost",size:"toolbar",disabled:r,onClick:()=>a(l),children:s.jsx(h,{id:"settings.remoteConnections.edit",defaultMessage:"Edit",description:"Button label to edit a remote connection"})}),s.jsx(K,{color:"danger",size:"toolbar",disabled:r,onClick:()=>d(l),children:s.jsx(h,{id:"settings.remoteConnections.remove",defaultMessage:"Remove",description:"Button label to remove a remote connection"})})]})})]},`${g.displayName}-${g.sshHost}-${l}`),e[9]=r,e[10]=a,e[11]=d,e[12]=u):u=e[12],p=c.map(u),e[4]=c,e[5]=r,e[6]=a,e[7]=d,e[8]=p}else p=e[8];let S;return e[13]!==p?(S=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border-collapse text-sm",children:[n,s.jsx("tbody",{children:p})]})}),e[13]=p,e[14]=S):S=e[14],S}function W(t){const e=X.c(9),{label:c,value:r,onChange:a,disabled:d}=t,i=d===void 0?!1:d;let m;e[0]!==c?(m=s.jsx("span",{className:"text-token-text-secondary text-xs",children:c}),e[0]=c,e[1]=m):m=e[1];let o;e[2]!==i||e[3]!==a||e[4]!==r?(o=s.jsx("input",{className:"bg-token-input-background text-token-input-foreground placeholder:text-token-input-placeholder-foreground w-full rounded-md border border-token-input-border px-2.5 py-1.5 text-sm outline-none focus:border-token-focus-border",value:r,disabled:i,onChange:a}),e[2]=i,e[3]=a,e[4]=r,e[5]=o):o=e[5];let n;return e[6]!==m||e[7]!==o?(n=s.jsxs("label",{className:"flex flex-col gap-1",children:[m,o]}),e[6]=m,e[7]=o,e[8]=n):n=e[8],n}function he(t){const e=X.c(89),{open:c,mode:r,draft:a,onOpenChange:d,onChange:i,onSubmit:m,isSaving:o}=t,n=te(),[p,S]=se.useState(!1);let u,g,l,_,I,E,P,k;if(e[0]!==a||e[1]!==p||e[2]!==o||e[3]!==r||e[4]!==d||e[5]!==m||e[6]!==c){const L=ye(a),V=p&&L.length>0,$=()=>{S(!0),!(L.length>0||o)&&m()};g=ce,E=c,e[15]!==d?(P=J=>{S(!1),d(J)},e[15]=d,e[16]=P):P=e[16],k="compact",e[17]!==$?(I=J=>{J.preventDefault(),$()},e[17]=$,e[18]=I):I=e[18],u=me,e[19]!==r?(l=s.jsx(Q,{children:s.jsx(fe,{title:r==="add"?s.jsx(h,{id:"settings.remoteConnections.dialog.addTitle",defaultMessage:"Add connection",description:"Title for add remote connection dialog"}):s.jsx(h,{id:"settings.remoteConnections.dialog.editTitle",defaultMessage:"Edit connection",description:"Title for edit remote connection dialog"})})}),e[19]=r,e[20]=l):l=e[20],_=V?s.jsx(Q,{children:s.jsx("div",{className:"border-token-border-error rounded-md border p-2 text-sm text-token-error-foreground",children:L.map(pe)})}):null,e[0]=a,e[1]=p,e[2]=o,e[3]=r,e[4]=d,e[5]=m,e[6]=c,e[7]=u,e[8]=g,e[9]=l,e[10]=_,e[11]=I,e[12]=E,e[13]=P,e[14]=k}else u=e[7],g=e[8],l=e[9],_=e[10],I=e[11],E=e[12],P=e[13],k=e[14];let A;e[21]!==n?(A=n.formatMessage({id:"settings.remoteConnections.dialog.field.displayName",defaultMessage:"Display name",description:"Label for display name field in remote connection editor dialog"}),e[21]=n,e[22]=A):A=e[22];let D;e[23]!==i?(D=L=>{const V=L.target.value;i($=>({...$,displayName:V}))},e[23]=i,e[24]=D):D=e[24];let R;e[25]!==a.displayName||e[26]!==o||e[27]!==A||e[28]!==D?(R=s.jsx(W,{label:A,value:a.displayName,onChange:D,disabled:o}),e[25]=a.displayName,e[26]=o,e[27]=A,e[28]=D,e[29]=R):R=e[29];let T;e[30]!==n?(T=n.formatMessage({id:"settings.remoteConnections.dialog.field.sshHost",defaultMessage:"SSH host",description:"Label for SSH host field in remote connection editor dialog"}),e[30]=n,e[31]=T):T=e[31];let w;e[32]!==i?(w=L=>{const V=L.target.value;i($=>({...$,sshHost:V}))},e[32]=i,e[33]=w):w=e[33];let b;e[34]!==a.sshHost||e[35]!==o||e[36]!==T||e[37]!==w?(b=s.jsx(W,{label:T,value:a.sshHost,onChange:w,disabled:o}),e[34]=a.sshHost,e[35]=o,e[36]=T,e[37]=w,e[38]=b):b=e[38];let y;e[39]!==n?(y=n.formatMessage({id:"settings.remoteConnections.dialog.field.sshPort",defaultMessage:"SSH port (optional)",description:"Label for optional SSH port field in remote connection editor dialog"}),e[39]=n,e[40]=y):y=e[40];let j;e[41]!==i?(j=L=>{const V=L.target.value;i($=>({...$,sshPort:V}))},e[41]=i,e[42]=j):j=e[42];let C;e[43]!==a.sshPort||e[44]!==o||e[45]!==y||e[46]!==j?(C=s.jsx(W,{label:y,value:a.sshPort,onChange:j,disabled:o}),e[43]=a.sshPort,e[44]=o,e[45]=y,e[46]=j,e[47]=C):C=e[47];let N;e[48]!==n?(N=n.formatMessage({id:"settings.remoteConnections.dialog.field.identity",defaultMessage:"Identity file (optional)",description:"Label for optional identity file field in remote connection editor dialog"}),e[48]=n,e[49]=N):N=e[49];let M;e[50]!==i?(M=L=>{const V=L.target.value;i($=>({...$,identity:V}))},e[50]=i,e[51]=M):M=e[51];let B;e[52]!==a.identity||e[53]!==o||e[54]!==N||e[55]!==M?(B=s.jsx(W,{label:N,value:a.identity,onChange:M,disabled:o}),e[52]=a.identity,e[53]=o,e[54]=N,e[55]=M,e[56]=B):B=e[56];let O;e[57]!==b||e[58]!==C||e[59]!==B||e[60]!==R?(O=s.jsx(Q,{children:s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[R,b,C,B]})}),e[57]=b,e[58]=C,e[59]=B,e[60]=R,e[61]=O):O=e[61];let v;e[62]!==d?(v=()=>d(!1),e[62]=d,e[63]=v):v=e[63];let F;e[64]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(h,{id:"settings.remoteConnections.dialog.cancel",defaultMessage:"Cancel",description:"Cancel button for remote connection editor dialog"}),e[64]=F):F=e[64];let H;e[65]!==o||e[66]!==v?(H=s.jsx(K,{color:"ghost",type:"button",disabled:o,onClick:v,children:F}),e[65]=o,e[66]=v,e[67]=H):H=e[67];let G;e[68]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx(h,{id:"settings.remoteConnections.dialog.apply",defaultMessage:"Save",description:"Save button for remote connection editor dialog"}),e[68]=G):G=e[68];let f;e[69]!==o?(f=s.jsx(K,{color:"primary",type:"submit",loading:o,children:G}),e[69]=o,e[70]=f):f=e[70];let x;e[71]!==H||e[72]!==f?(x=s.jsx(Q,{children:s.jsxs(ge,{children:[H,f]})}),e[71]=H,e[72]=f,e[73]=x):x=e[73];let z;e[74]!==u||e[75]!==l||e[76]!==O||e[77]!==_||e[78]!==x?(z=s.jsxs(u,{children:[l,_,O,x]}),e[74]=u,e[75]=l,e[76]=O,e[77]=_,e[78]=x,e[79]=z):z=e[79];let q;e[80]!==z||e[81]!==I?(q=s.jsx("form",{onSubmit:I,children:z}),e[80]=z,e[81]=I,e[82]=q):q=e[82];let Y;return e[83]!==g||e[84]!==q||e[85]!==E||e[86]!==P||e[87]!==k?(Y=s.jsx(g,{open:E,onOpenChange:P,size:k,children:q}),e[83]=g,e[84]=q,e[85]=E,e[86]=P,e[87]=k,e[88]=Y):Y=e[88],Y}function pe(t,e){return s.jsx("div",{children:t},`editor-error-${e}`)}function ee(){return{displayName:"",sshHost:"",sshPort:"",identity:""}}function xe(t){return{displayName:t.displayName,sshHost:t.sshHost,sshPort:t.sshPort?String(t.sshPort):"",identity:t.identity?t.identity:""}}function Se(t){const e=t.trim();if(e.length===0||!/^\d+$/.test(e))return null;const c=Number(e);return Number.isSafeInteger(c)?c:null}function be(t){const e=Se(t.sshPort);return{displayName:t.displayName.trim(),sshHost:t.sshHost.trim(),sshPort:e,identity:t.identity.trim().length>0?t.identity.trim():null}}function ye(t){const e=[];t.displayName.trim().length===0&&e.push(s.jsx(h,{id:"settings.remoteConnections.dialog.field.displayName.error",defaultMessage:"Display name is required.",description:"Error message for display name field in remote connection editor dialog"})),t.sshHost.trim().length===0&&e.push(s.jsx(h,{id:"settings.remoteConnections.dialog.field.sshHost.error",defaultMessage:"SSH host is required.",description:"Error message for SSH host field in remote connection editor dialog"}));const c=t.sshPort.trim();if(c.length>0)if(!/^\d+$/.test(c))e.push(s.jsx(h,{id:"settings.remoteConnections.dialog.field.sshPort.intError",defaultMessage:"SSH port must be an integer.",description:"Error message for SSH port field when the input is not an integer"}));else{const r=Number(c);(!Number.isSafeInteger(r)||r<1||r>65535)&&e.push(s.jsx(h,{id:"settings.remoteConnections.dialog.field.sshPort.rangeError",defaultMessage:"SSH port must be between 1 and 65535.",description:"Error message for SSH port field when the input is not between 1 and 65535"}))}return e}export{Ce as RemoteConnectionsSettings};
//# sourceMappingURL=remote-connections-settings-BOXN4rfR.js.map
